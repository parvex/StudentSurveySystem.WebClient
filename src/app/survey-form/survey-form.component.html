<div class="modal-header">
  <h4 class="modal-title" id="modal-basic-title">Survey {{survey?.isTemplate ? 'template' : ''}} form</h4>
  <button type="button" class="close" aria-label="Close" (click)="modal.hide()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <form #form="ngForm" class="container">
    <div class="form-group row">
        <label class="col-form-label col-md-2" for="Title">Title</label>
        <div class="col-md-10">
            <input #Name="ngModel" [(ngModel)]="survey.name" required class="form-control" id="Title" name="Title" type="text">
            <div [hidden]="Name.valid || Name.pristine" class="alert alert-danger">Title is required.</div>
        </div>
    </div>
    <div class="form-group row">
        <label class="col-form-label col-md-2" for="EndDate">End date</label>
        <div class="col-md-10">
          <input #EndDate="ngModel" [(ngModel)]="survey.endDate" bsDatepicker [bsValue]="survey.endDate" class="form-control" id="EndDate" name="EndDate" type="text">
          <div [hidden]="EndDate.valid || EndDate.pristine" class="alert alert-danger">Podaj poprawną datę.</div>
        </div>
    </div>
    <div class="form-group row">
      <div class="col-sm-2">Anonymous</div>
      <div class="col-sm-10">
        <div class="form-check">
          <input #Anonymous="ngModel" [(ngModel)]="survey.anonymous" type="checkbox" class="form-check-input" name="Anonymous" id="Anonymous">
        </div>
      </div>
    </div>
    <div class="form-group row">
      <div class="col-sm-2">Is active</div>
      <div class="col-sm-10">
        <div class="form-check">
          <input #Active="ngModel" [(ngModel)]="survey.active" type="checkbox" class="form-check-input" name="Active" id="Active">
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-form-label col-md-2" for="Status">Semester</label>
      <div class="col-md-10">
        <select #Semester="ngModel" [(ngModel)]="selectedSemester" required id="Semester" class="form-control" name="Semester">
          <option *ngFor="let semester of semesters" [ngValue]="semester">{{semester.name}}</option>
        </select>
        <div [hidden]="Semester.valid || Semester.pristine" class="alert alert-danger">Choose semester.</div>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-form-label col-md-2" for="Status">Course</label>
      <div class="col-md-10">
        <select #Course="ngModel" [(ngModel)]="survey.courseId" required id="Course" class="form-control" name="Course">
          <option *ngFor="let course of selectedSemester?.courses" [ngValue]="course.id">{{course.name}}</option>
        </select>
        <div [hidden]="Course.valid || Course.pristine" class="alert alert-danger">Choose semester and course.</div>
      </div>
    </div>

    <button class="btn btn-info" (click)="onAddQuestion()">Add question</button>

    <table class="table table-light">
      <thead class="thead-dark">
      <tr>
        <th scope="col">Actions</th>
        <th scope="col">Index</th>
        <th scope="col">Question text</th>
        <th scope="col">Question type</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let question of survey.questions" style="cursor: pointer;">
        <th scope="row">
          <a class="action-link" (click)="onQuestionEditClicked(question.id)"><img class="list-icon" src="assets/icons/pen.png"/></a>
          <a class="action-link" (click)="onQuestionDeleteClicked(question.id, confirmDeleteTemplate)"><img class="list-icon" src="assets/icons/delete.png"/></a>
        </th>
        <td>{{question.index}}</td>
        <td>{{question.questionText}}</td>
        <td>{{question.questionType}}</td>
      </tr>

      </tbody>
    </table>
  </form>


  <hr/>
  <button class="btn btn-primary" (click)="onSave()">Save</button>
</div>



<ng-template #confirmDeleteTemplate>
  <div class="modal-body text-center">
    <p>Na pewno chcesz usunąc?</p>
    <button type="button" class="btn btn-primary" (click)="onQuestionDelete()" >Tak</button>
    <button type="button" class="btn btn-danger" (click)="this.deleteModalRef.hide()" >Nie</button>
  </div>
</ng-template>
